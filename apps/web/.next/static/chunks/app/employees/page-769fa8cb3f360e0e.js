(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{5100:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5636),n=a(8408),r=a(9621);function c(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),[d,i]=(0,n.useState)(""),[h,u]=(0,n.useState)("");async function m(){t(await (0,r.Vg)("/employees"))}async function x(){u("");try{await (0,r.$P)("/employees",{fullName:a,msisdn:l,department:d}),c(""),o(""),i(""),await m(),u("Employee added.")}catch(e){u(e.message||String(e))}}async function j(e,t){await (0,r.$Y)("/employees/".concat(e),{status:"ACTIVE"===t?"SUSPENDED":"ACTIVE"}),await m()}return(0,n.useEffect)(()=>{m().catch(console.error)},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Employees"}),(0,s.jsxs)("div",{className:"mt-6 rounded-xl border p-4",children:[(0,s.jsx)("div",{className:"font-medium",children:"Add employee"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-2 md:grid-cols-3",children:[(0,s.jsx)("input",{className:"border rounded-lg p-2",placeholder:"Full name",value:a,onChange:e=>c(e.target.value)}),(0,s.jsx)("input",{className:"border rounded-lg p-2",placeholder:"MSISDN e.g. +67570123456",value:l,onChange:e=>o(e.target.value)}),(0,s.jsx)("input",{className:"border rounded-lg p-2",placeholder:"Department",value:d,onChange:e=>i(e.target.value)})]}),(0,s.jsx)("button",{className:"mt-3 rounded-lg bg-black text-white px-3 py-2",onClick:x,children:"Add"}),h?(0,s.jsx)("div",{className:"mt-2 text-sm text-gray-700",children:h}):null]}),(0,s.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left border-b",children:[(0,s.jsx)("th",{className:"py-2",children:"Name"}),(0,s.jsx)("th",{children:"MSISDN"}),(0,s.jsx)("th",{children:"Department"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-2",children:e.fullName}),(0,s.jsx)("td",{children:e.msisdn}),(0,s.jsx)("td",{children:e.department||"â€”"}),(0,s.jsx)("td",{children:e.status}),(0,s.jsx)("td",{className:"text-right",children:(0,s.jsx)("button",{className:"underline",onClick:()=>j(e.id,e.status),children:"ACTIVE"===e.status?"Suspend":"Activate"})})]},e.id))})]})}),(0,s.jsxs)("div",{className:"mt-6 text-sm text-gray-600",children:["Employees request credit via SMS: ",(0,s.jsx)("code",{children:"TOPUP 5"}),", ",(0,s.jsx)("code",{children:"BAL"}),", ",(0,s.jsx)("code",{children:"HISTORY"}),", ",(0,s.jsx)("code",{children:"HELP"})]})]})}},9621:(e,t,a)=>{"use strict";a.d(t,{$P:()=>c,$Y:()=>l,Vg:()=>r});let s="http://localhost:4000";function n(){return localStorage.getItem("token")||""}async function r(e){let t=n(),a=await fetch("".concat(s).concat(e),{headers:t?{Authorization:"Bearer ".concat(t)}:void 0,cache:"no-store"});if(!a.ok)throw Error(await a.text());return a.json()}async function c(e,t){let a=n(),r=await fetch("".concat(s).concat(e),{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},body:JSON.stringify(t)});if(!r.ok)throw Error(await r.text());return r.json()}async function l(e,t){let a=n(),r=await fetch("".concat(s).concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},body:JSON.stringify(t)});if(!r.ok)throw Error(await r.text());return r.json()}},9894:(e,t,a)=>{Promise.resolve().then(a.bind(a,5100))}},e=>{e.O(0,[64,960,358],()=>e(e.s=9894)),_N_E=e.O()}]);