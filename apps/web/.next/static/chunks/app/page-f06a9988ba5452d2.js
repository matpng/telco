(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4817:(t,e,a)=>{Promise.resolve().then(a.bind(a,8234))},8234:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>r});var n=a(5636),o=a(8408),s=a(9621);function r(){let[t,e]=(0,o.useState)(null),[a,r]=(0,o.useState)("");return((0,o.useEffect)(()=>{(0,s.Vg)("/dashboard/summary").then(e).catch(t=>r(t.message||String(t)))},[]),a)?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),(0,n.jsx)("p",{className:"mt-4 text-sm text-red-700",children:a}),(0,n.jsxs)("p",{className:"mt-2 text-sm",children:["If not logged in, go to ",(0,n.jsx)("a",{className:"underline",href:"/login",children:"/login"}),"."]})]}):t?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Dashboard"}),(0,n.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)(i,{title:"Total spend (this month)",value:"PGK ".concat(Number(t.totalSpend||0).toFixed(2))}),(0,n.jsx)(i,{title:"Employees",value:String(t.employees||0)}),(0,n.jsx)(i,{title:"Network split",value:Object.entries(t.byNetwork||{}).map(t=>{let[e,a]=t;return"".concat(e,":").concat(Number(a).toFixed(2))}).join(" | ")||"—"})]}),(0,n.jsxs)("div",{className:"mt-8 text-sm text-gray-600",children:["Period: ",new Date(t.periodStart).toLocaleDateString()," – ",new Date(t.periodEnd).toLocaleDateString()]})]}):(0,n.jsx)("div",{children:"Loading..."})}function i(t){let{title:e,value:a}=t;return(0,n.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-600",children:e}),(0,n.jsx)("div",{className:"mt-2 text-xl font-semibold",children:a})]})}},9621:(t,e,a)=>{"use strict";a.d(e,{$P:()=>r,$Y:()=>i,Vg:()=>s});let n="http://localhost:4000";function o(){return localStorage.getItem("token")||""}async function s(t){let e=o(),a=await fetch("".concat(n).concat(t),{headers:e?{Authorization:"Bearer ".concat(e)}:void 0,cache:"no-store"});if(!a.ok)throw Error(await a.text());return a.json()}async function r(t,e){let a=o(),s=await fetch("".concat(n).concat(t),{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},body:JSON.stringify(e)});if(!s.ok)throw Error(await s.text());return s.json()}async function i(t,e){let a=o(),s=await fetch("".concat(n).concat(t),{method:"PATCH",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer ".concat(a)}:{}},body:JSON.stringify(e)});if(!s.ok)throw Error(await s.text());return s.json()}}},t=>{t.O(0,[64,960,358],()=>t(t.s=4817)),_N_E=t.O()}]);